import{i as j,_ as Ue}from"../chunks/BzmZGN5a.js";import"../chunks/DsnmJJEf.js";import{i as Be}from"../chunks/Dk4EC0VZ.js";import{o as Ve,h as Fe,s as h,e as ge}from"../chunks/HDKps4st.js";import{i as _e,a7 as Je,a8 as g,a as f,aa as Ge,b as ee,m as te,g as t,ag as He,ab as n,ad as m,ac as o,f as P,ah as M,a9 as w,c as be,p as We,ai as Ke}from"../chunks/CYHEg9Ld.js";import{e as V,i as F,s as Qe}from"../chunks/CubFvk9q.js";function Xe(T,K,l){var k=T==null?"":""+T;return k=k?k+" "+K:K,k===""?null:k}function ye(T,K,l,k,u,v){var J=T.__className;if(_e||J!==l||J===void 0){var b=Xe(l,k);(!_e||b!==T.getAttribute("class"))&&(b==null?T.removeAttribute("class"):T.className=b),T.__className=l}return v}var Ye=g('<p class="subtitle svelte-mdhl9n"> </p> <div class="trip-stats svelte-mdhl9n"><div class="stat svelte-mdhl9n"><div class="stat-number svelte-mdhl9n"> </div> <div>Days</div></div> <div class="stat svelte-mdhl9n"><div class="stat-number svelte-mdhl9n"> </div> <div>Cities</div></div> <div class="stat svelte-mdhl9n"><div class="stat-number svelte-mdhl9n"> </div> <div>Michelin Stars</div></div> <div class="stat svelte-mdhl9n"><div class="stat-number svelte-mdhl9n"> </div> <div>Memories</div></div></div>',1),Ze=g("<button></button>"),et=g('<div class="day-selector svelte-mdhl9n"><button>📍 Overview</button> <!></div>'),tt=g('<div class="legend-item svelte-mdhl9n"><div class="legend-color svelte-mdhl9n" style="background: #e67e22; color: white; font-weight: bold;">1</div> <span>Destinations (with order)</span></div> <div class="legend-item svelte-mdhl9n"><div class="legend-color svelte-mdhl9n" style="background: #d35400;">🚄</div> <span>Inter-city Travel</span></div>',1),at=g('<div class="legend-item svelte-mdhl9n"><div class="legend-color svelte-mdhl9n" style="background: #9b59b6;">🏨</div> <span>Accommodation</span></div> <div class="legend-item svelte-mdhl9n"><div class="legend-color svelte-mdhl9n" style="background: #2ecc71;"></div> <span>Daily Activities</span></div> <div class="legend-item svelte-mdhl9n"><div class="legend-color svelte-mdhl9n" style="background: #3498db;"></div> <span>Transportation Routes</span></div>',1),it=g('<li class="svelte-mdhl9n"><div class="highlight-timing svelte-mdhl9n"><span class="time svelte-mdhl9n"> </span> <span class="activity svelte-mdhl9n"> </span> <span class="duration svelte-mdhl9n"> </span> <span class="transport svelte-mdhl9n">🏨 Accommodation</span></div></li>'),st=g('<div class="day-title svelte-mdhl9n">🗺️ Trip Overview</div> <div class="route-info svelte-mdhl9n"><strong>📊 Journey Summary:</strong><br/> </div> <div><strong>📍 Destination Sequence:</strong> <ul class="highlights svelte-mdhl9n"></ul></div>',1),ot=g(" <br/>",1),rt=g('<span class="transportation svelte-mdhl9n"> </span>'),nt=g('<li class="svelte-mdhl9n"><div class="highlight-timing svelte-mdhl9n"><span class="time svelte-mdhl9n"> </span> <span class="activity svelte-mdhl9n"> </span> <span class="duration svelte-mdhl9n"> </span> <span class="transport svelte-mdhl9n"> </span></div></li>'),dt=g('<strong>📍 Day Activities:</strong> <ul class="highlights svelte-mdhl9n"></ul>',1),lt=g('<div class="highlight-timing svelte-mdhl9n"><span class="time svelte-mdhl9n"> </span> <span class="activity svelte-mdhl9n"> </span> <span class="transport svelte-mdhl9n"> </span></div>'),ct=g('<li class="svelte-mdhl9n"><!></li>'),vt=g('<strong>📍 Highlights:</strong> <ul class="highlights svelte-mdhl9n"></ul>',1),mt=g('<div class="day-title svelte-mdhl9n"> </div> <div class="route-info svelte-mdhl9n"><strong>🚗 Transportation:</strong><br/> <!></div> <div style="margin: 1rem 0;"></div> <div><!></div>',1),pt=g("<p>Select a day to see detailed itinerary and route information.</p>"),ht=g('<a class="destination-card svelte-mdhl9n"><div class="destination-icon svelte-mdhl9n"> </div> <div class="destination-name svelte-mdhl9n"> </div> <div class="destination-desc svelte-mdhl9n"> </div></a>'),ut=g('<div class="destination-links svelte-mdhl9n"></div>'),ft=g('<div class="container svelte-mdhl9n"><header class="svelte-mdhl9n"><h1 class="svelte-mdhl9n">🇯🇵 Epic Japan Adventure</h1> <!></header> <div class="main-content svelte-mdhl9n"><div class="map-section svelte-mdhl9n"><h2 class="section-title svelte-mdhl9n">📍 Interactive Route Map</h2> <!> <div id="map"></div> <div class="legend svelte-mdhl9n"><!></div></div> <div class="itinerary-section svelte-mdhl9n"><h2 class="section-title svelte-mdhl9n">🗓️ Daily Itinerary</h2> <div class="day-details svelte-mdhl9n"><!></div></div></div> <!></div>');function kt(T,K){Je(K,!1);let l=te(null),k=te(null),u=null,v=null,J=null,b=[],C=te(1),y=te(null);Ve(async()=>{const[a,e]=await Promise.all([fetch("/db/schedule.json"),fetch("/db/destinations.json")]);ee(l,await a.json()),ee(k,await e.json()),ee(y,we(t(l)));const i=["tokyo","fuji","hakone","kyoto","nara","osaka","hiroshima","kanazawa"],r=i.map(d=>fetch(`/db/places/${d}.json`).then(c=>c.json()).catch(()=>null)),s=await Promise.all(r);i.forEach((d,c)=>{s[c]&&s[c]});{v=(await Ue(()=>import("../chunks/r9KgTLRM.js").then(p=>p.l),[],import.meta.url)).default;const c=document.createElement("link");c.rel="stylesheet",c.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(c),setTimeout(xe,100)}});function xe(){!v||!t(l)||(u=v.map("map").setView([36.2048,138.2529],6),v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(u),Object.entries(t(l).destinations).forEach(([a,e])=>{v.marker(e,{icon:v.divIcon({className:"destination-marker",html:'<div style="background: #2ecc71; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; opacity: 0.7;"></div>',iconSize:[12,12],iconAnchor:[6,6]})}).addTo(u).bindTooltip(a.charAt(0).toUpperCase()+a.slice(1),{permanent:!1,direction:"top"})}),setTimeout(()=>ae("overview"),200))}function we(a){if(!a||!a.itinerary)return null;const e=[];let i=null,r=0;for(let s=1;s<=18;s++){const d=a.itinerary[s];d&&(d.location!==i?(i&&r>0&&e.push({location:i,days:r,coordinates:a.destinations[i],order:e.length+1}),i=d.location,r=1):r++)}return i&&r>0&&e.push({location:i,days:r,coordinates:a.destinations[i],order:e.length+1}),{sequence:e,totalDays:18}}function ke(){if(!t(y)||!t(y).sequence){console.log("No overview data available");return}console.log("Showing overview with data:",t(y)),t(y).sequence.forEach((e,i)=>{if(e.coordinates){const r=v.marker(e.coordinates,{icon:v.divIcon({className:"overview-marker",html:`<div style="background: #e67e22; width: 36px; height: 36px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold;">${e.order}</div>`,iconSize:[36,36],iconAnchor:[18,18]})}).addTo(u);r.bindPopup(`
					<strong>${e.order}. ${e.location.charAt(0).toUpperCase()+e.location.slice(1)}</strong><br>
					${e.days} day${e.days>1?"s":""}<br>
					<em>Stop ${e.order} of ${t(y).sequence.length}</em>
				`),b.push(r)}}),Ae(t(y).sequence);const a=t(y).sequence.filter(e=>e.coordinates).map(e=>e.coordinates);if(a.length>1){const e=new v.featureGroup;a.forEach(i=>{e.addLayer(v.marker(i))}),u.fitBounds(e.getBounds().pad(.1))}else a.length===1&&u.setView(a[0],6)}function Ae(a){if(!(!v||a.length<2))for(let e=0;e<a.length-1;e++){const i=a[e],r=a[e+1];if(i.coordinates&&r.coordinates){const s=v.polyline([i.coordinates,r.coordinates],{color:"#e67e22",weight:4,opacity:.8,dashArray:"15, 10"}).addTo(u),d=[(i.coordinates[0]+r.coordinates[0])/2,(i.coordinates[1]+r.coordinates[1])/2],c=v.marker(d,{icon:v.divIcon({className:"travel-marker",html:'<div style="background: #d35400; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); white-space: nowrap;">🚄 Travel</div>',iconSize:[60,20],iconAnchor:[30,10]})}).addTo(u);c.bindPopup(`
					<strong>Travel Route</strong><br>
					From: ${i.location.charAt(0).toUpperCase()+i.location.slice(1)}<br>
					To: ${r.location.charAt(0).toUpperCase()+r.location.slice(1)}<br>
					<em>Leg ${e+1} of ${a.length-1}</em>
				`),b.push(s),b.push(c)}}}function ae(a){if(!u||!t(l)){console.log("Cannot show day - map or scheduleData not ready");return}if(console.log("Showing day:",a,"Current selectedDay:",t(C)),ee(C,a),b.forEach(i=>u.removeLayer(i)),b=[],J&&u.removeLayer(J),a==="overview"){ke();return}const e=t(l).itinerary[a];if(!e){console.log("No day data found for day:",a);return}if(console.log("Day data for day",a,":",e),e.activities&&Array.isArray(e.activities)){if(console.log("Using new format with day-specific activities"),e.accommodation){if(e.accommodation.coordinates){const s=v.marker(e.accommodation.coordinates,{icon:v.divIcon({className:"accommodation-marker",html:'<div style="background: #9b59b6; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 12px;">🏨</div>',iconSize:[24,24],iconAnchor:[12,12]})}).addTo(u);s.bindPopup(`
						<strong>🏨 ${e.accommodation.name}</strong><br>
						Base accommodation for ${e.title}
					`),b.push(s)}else if(e.accommodation.to_coordinates){const s=v.marker(e.accommodation.to_coordinates,{icon:v.divIcon({className:"accommodation-marker",html:'<div style="background: #9b59b6; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 12px;">🏨</div>',iconSize:[24,24],iconAnchor:[12,12]})}).addTo(u);s.bindPopup(`
						<strong>🏨 ${e.accommodation.to}</strong><br>
						New accommodation for ${e.title}
					`),b.push(s)}}e.activities.forEach((s,d)=>{if(s.coordinates){const c=v.marker(s.coordinates,{icon:v.divIcon({className:"activity-marker",html:`<div style="background: #2ecc71; width: 28px; height: 28px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: bold;">${d+1}</div>`,iconSize:[28,28],iconAnchor:[14,14]})}).addTo(u);c.bindPopup(`
						<strong>${s.time} - ${s.name}</strong><br>
						Duration: ${s.duration}<br>
						Transport: ${s.transport.method} (${s.transport.time})
					`),b.push(c)}}),$e(e.activities,e.accommodation);const i=e.activities.filter(s=>s.coordinates).map(s=>s.coordinates),r=e.accommodation?.coordinates||e.accommodation?.to_coordinates;if(r&&i.unshift(r),i.length>1){const s=new v.featureGroup;i.forEach(d=>{s.addLayer(v.marker(d))}),u.fitBounds(s.getBounds().pad(.15))}else i.length===1&&u.setView(i[0],14)}else{console.log("Using old format - showing destination location");const i=t(l).destinations[e.location];if(i){const r=v.marker(i,{icon:v.divIcon({className:"custom-marker",html:'<div style="background: #e74c3c; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]})}).addTo(u);r.bindPopup(`<strong>${e.title}</strong>`),b.push(r),u.setView(i,12)}}a===5?I([t(l).destinations.tokyo,t(l).destinations.fuji],"#3498db"):a===7?I([t(l).destinations.fuji,t(l).destinations.hakone],"#3498db"):a===9?I([t(l).destinations.hakone,t(l).destinations.kyoto],"#3498db"):a===12?I([t(l).destinations.kyoto,t(l).destinations.nara],"#2ecc71"):a===13?I([t(l).destinations.kyoto,t(l).destinations.osaka],"#3498db"):a===15?I([t(l).destinations.osaka,t(l).destinations.hiroshima],"#3498db"):a===17?I([t(l).destinations.hiroshima,t(l).destinations.kanazawa],"#3498db"):a===18&&I([t(l).destinations.kanazawa,t(l).destinations.tokyo],"#3498db")}function I(a,e){v&&(J=v.polyline(a,{color:e,weight:4,opacity:.8}).addTo(u))}function $e(a,e){if(!v||!a||a.length===0)return;const i=a.filter(s=>s.coordinates);if(i.length===0)return;const r=e?.coordinates||e?.to_coordinates;if(e&&r&&e.toFirstActivity){const s=i[0];if(s){const d=e.name||e.to||"🏨 Accommodation";ie(r,s.coordinates,e.toFirstActivity,d,s.name)}}for(let s=0;s<i.length-1;s++){const d=i[s],c=i[s+1];ie(d.coordinates,c.coordinates,c.transport,d.name,c.name)}if(e&&r&&e.fromLastActivity){const s=i[i.length-1];if(s){const d=e.name||e.to||"🏨 Accommodation";ie(s.coordinates,r,e.fromLastActivity,s.name,d)}}}function ie(a,e,i,r,s){const d=Te(i.method),c=v.polyline([a,e],{color:d,weight:3,opacity:.7,dashArray:"10, 5"}).addTo(u),p=[(a[0]+e[0])/2,(a[1]+e[1])/2],_=v.marker(p,{icon:v.divIcon({className:"transport-marker",html:`<div style="background: ${d}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); white-space: nowrap;">${i.method.split(" ")[0]} ${i.time}</div>`,iconSize:[80,20],iconAnchor:[40,10]})}).addTo(u);_.bindPopup(`
			<strong>${i.method}</strong><br>
			Travel time: ${i.time}<br>
			From: ${r}<br>
			To: ${s}
		`),b.push(c),b.push(_)}function Te(a){return a.includes("🚶")?"#27ae60":a.includes("🚇")?"#3498db":a.includes("🚃")?"#9b59b6":a.includes("🚌")?"#e67e22":a.includes("🛏️")?"#95a5a6":"#34495e"}Be();var se=ft();Fe(a=>{He.title="Epic Japan Adventure: 18-Day Journey"});var oe=n(se),De=m(n(oe),2);{var Se=a=>{var e=Ye(),i=P(e),r=n(i,!0);o(i);var s=m(i,2),d=n(s),c=n(d),p=n(c,!0);o(c),M(2),o(d);var _=m(d,2),D=n(_),A=n(D,!0);o(D),M(2),o(_);var R=m(_,2),S=n(R),G=n(S,!0);o(S),M(2),o(R);var O=m(R,2),H=n(O),Q=n(H,!0);o(H),M(2),o(O),o(s),w(()=>{h(r,t(l).trip.subtitle),h(p,t(l).trip.stats.days),h(A,t(l).trip.stats.cities),h(G,t(l).trip.stats.michelinStars),h(Q,t(l).trip.stats.memories)}),f(a,e)};j(De,a=>{t(l)&&a(Se)})}o(oe);var re=m(oe,2),ne=n(re),me=m(n(ne),2);{var ze=a=>{var e=et(),i=n(e),r=m(i,2);V(r,0,()=>Array(18),F,(s,d,c)=>{var p=Ze();p.textContent=`Day ${c+1}`,w(()=>ye(p,1,`day-btn ${t(C)===c+1?"active":""}`,"svelte-mdhl9n")),ge("click",p,()=>ae(c+1)),f(s,p)}),o(e),w(()=>ye(i,1,`day-btn overview-btn ${t(C)==="overview"?"active":""}`,"svelte-mdhl9n")),ge("click",i,()=>ae("overview")),f(a,e)};j(me,a=>{t(l)&&a(ze)})}var pe=m(me,4),Le=n(pe);{var Ne=a=>{var e=tt();M(2),f(a,e)},je=a=>{var e=at();M(4),f(a,e)};j(Le,a=>{t(C)==="overview"?a(Ne):a(je,!1)})}o(pe),o(ne);var he=m(ne,2),ue=m(n(he),2),Me=n(ue);{var Ce=a=>{var e=st(),i=m(P(e),2),r=m(n(i),2);o(i);var s=m(i,2),d=m(n(s),2);V(d,5,()=>t(y).sequence,F,(c,p)=>{var _=it(),D=n(_),A=n(D),R=n(A);o(A);var S=m(A,2),G=n(S,!0);o(S);var O=m(S,2),H=n(O);o(O),M(2),o(D),o(_),w(Q=>{h(R,`${t(p).order??""}.`),h(G,Q),h(H,`${t(p).days??""} day${t(p).days>1?"s":""}`)},[()=>t(p).location.charAt(0).toUpperCase()+t(p).location.slice(1)]),f(c,_)}),o(d),o(s),w(()=>h(r,` ${t(y).totalDays??""} days across ${t(y).sequence.length??""} destinations`)),f(a,e)},Ie=a=>{var e=be(),i=P(e);{var r=d=>{var c=mt();const p=We(()=>t(l).itinerary[t(C)]);var _=P(c),D=n(_,!0);o(_);var A=m(_,2),R=m(n(A),3);V(R,1,()=>t(p).routes,F,(z,x)=>{M();var $=ot(),q=P($);M(),w(()=>h(q,`${t(x).from??""} → ${t(x).to??""} (${t(x).transport??""}, ${t(x).duration??""})`)),f(z,$)}),o(A);var S=m(A,2);V(S,5,()=>t(p).transportation,F,(z,x)=>{var $=rt(),q=n($,!0);o($),w(()=>h(q,t(x))),f(z,$)}),o(S);var G=m(S,2),O=n(G);{var H=z=>{var x=dt(),$=m(P(x),2);V($,5,()=>t(p).activities,F,(q,L)=>{var W=nt(),X=n(W),Y=n(X),U=n(Y,!0);o(Y);var B=m(Y,2),de=n(B,!0);o(B);var Z=m(B,2),le=n(Z);o(Z);var N=m(Z,2),E=n(N);o(N),o(X),o(W),w(()=>{h(U,t(L).time),h(de,t(L).name),h(le,`Duration: ${t(L).duration??""}`),h(E,`${t(L).transport.method??""} (${t(L).transport.time??""})`)}),f(q,W)}),o($),f(z,x)},Q=z=>{var x=be(),$=P(x);{var q=L=>{var W=vt(),X=m(P(W),2);V(X,5,()=>t(p).highlights,F,(Y,U)=>{var B=ct(),de=n(B);{var Z=N=>{var E=lt(),ce=n(E),Re=n(ce,!0);o(ce);var ve=m(ce,2),Oe=n(ve,!0);o(ve);var fe=m(ve,2),qe=n(fe,!0);o(fe),o(E),w(()=>{h(Re,t(U).time),h(Oe,t(U).activity),h(qe,t(U).transport)}),f(N,E)},le=N=>{var E=Ke();w(()=>h(E,t(U))),f(N,E)};j(de,N=>{typeof t(U)=="object"?N(Z):N(le,!1)})}o(B),f(Y,B)}),o(X),f(L,W)};j($,L=>{t(p).highlights&&L(q)},!0)}f(z,x)};j(O,z=>{t(p).activities&&Array.isArray(t(p).activities)?z(H):z(Q,!1)})}o(G),w(()=>h(D,t(p).title)),f(d,c)},s=d=>{var c=pt();f(d,c)};j(i,d=>{t(l)&&t(l).itinerary[t(C)]?d(r):d(s,!1)},!0)}f(a,e)};j(Me,a=>{t(C)==="overview"&&t(y)?a(Ce):a(Ie,!1)})}o(ue),o(he),o(re);var Ee=m(re,2);{var Pe=a=>{var e=ut();V(e,5,()=>t(k).destinations,F,(i,r)=>{var s=ht(),d=n(s),c=n(d,!0);o(d);var p=m(d,2),_=n(p,!0);o(p);var D=m(p,2),A=n(D,!0);o(D),o(s),w(()=>{Qe(s,"href",`/places/${t(r).id??""}`),h(c,t(r).icon),h(_,t(r).name),h(A,t(r).description)}),f(i,s)}),o(e),f(a,e)};j(Ee,a=>{t(k)&&a(Pe)})}o(se),f(T,se),Ge()}export{kt as component};
