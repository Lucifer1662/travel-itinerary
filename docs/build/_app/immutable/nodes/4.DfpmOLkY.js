import{i as w,_ as ze}from"../chunks/BzmZGN5a.js";import"../chunks/DsnmJJEf.js";import{i as Be}from"../chunks/Dk4EC0VZ.js";import{o as Ve,h as je,s as p}from"../chunks/HDKps4st.js";import{a7 as Ie,ae as Ce,af as Re,a8 as d,a as n,aa as Je,a9 as k,g as e,m as q,b as J,u as r,ag as Ne,ab as t,ac as a,c as me,f as le,ah as Oe,ad as o}from"../chunks/CYHEg9Ld.js";import{e as A,i as z,s as F}from"../chunks/CubFvk9q.js";import{s as Ge,a as He}from"../chunks/CTg1zm0A.js";import{s as qe}from"../chunks/D49EaV9x.js";import{b as Fe}from"../chunks/C-pOSAx8.js";const Ke=()=>{const M=qe;return{page:{subscribe:M.page.subscribe},navigating:{subscribe:M.navigating.subscribe},updated:M.updated}},Qe={subscribe(M){return Ke().page.subscribe(M)}};var Ue=d('<div class="loading svelte-1ychebp"><h2>Loading place information...</h2></div>'),We=d('<div class="error svelte-1ychebp"><h2> </h2> <a href="/" class="back-link svelte-1ychebp">← Return to main page</a></div>'),Xe=d('<li class="svelte-1ychebp"><a target="_blank" rel="noopener noreferrer" class="svelte-1ychebp"> </a></li>'),Ye=d('<div class="photo-spots svelte-1ychebp"><h4 class="svelte-1ychebp">📸 Best Photo Spots:</h4> <ul class="svelte-1ychebp"></ul></div>'),Ze=d('<a target="_blank" rel="noopener noreferrer" class="resource-link svelte-1ychebp"> </a>'),ea=d('<div class="resources svelte-1ychebp"><h4 class="svelte-1ychebp">🔗 Resources:</h4> <div class="resource-links svelte-1ychebp"></div></div>'),aa=d('<div class="activity-card svelte-1ychebp"><div class="activity-header svelte-1ychebp"><h3 class="svelte-1ychebp"><span class="activity-number svelte-1ychebp"></span> </h3> <div class="activity-meta svelte-1ychebp"><span class="cost"> </span> <span class="duration"> </span></div></div> <p class="activity-description svelte-1ychebp"> </p> <!> <!></div>'),sa=d('<li class="svelte-1ychebp"><strong> </strong> <a target="_blank" rel="noopener noreferrer" class="svelte-1ychebp">Learn more ↗</a></li>'),ta=d('<a target="_blank" rel="noopener noreferrer" class="svelte-1ychebp">More info ↗</a>'),ra=d('<li class="svelte-1ychebp"><strong> </strong> <!></li>'),oa=d('<div class="info-card svelte-1ychebp"><h3 class="svelte-1ychebp">📅 Best Time to Visit</h3> <ul class="svelte-1ychebp"></ul></div>'),ia=d('<li class="svelte-1ychebp"> </li>'),la=d('<div class="info-card svelte-1ychebp"><h3 class="svelte-1ychebp">⚠️ Safety Tips</h3> <ul class="svelte-1ychebp"></ul></div>'),na=d('<div class="additional-info svelte-1ychebp"><div class="info-card svelte-1ychebp"><h3 class="svelte-1ychebp">🚇 Transportation</h3> <ul class="svelte-1ychebp"></ul></div> <!> <!></div>'),ca=d('<header class="place-header svelte-1ychebp"><div class="header-content"><a href="/" class="back-link svelte-1ychebp">← Back to Journey</a> <div class="place-title svelte-1ychebp"><h1 class="svelte-1ychebp"><span class="place-icon svelte-1ychebp"> </span> </h1> <p class="place-description svelte-1ychebp"> </p></div></div></header> <div class="place-content svelte-1ychebp"><div class="map-section svelte-1ychebp"><h2 class="section-title svelte-1ychebp">📍 Location & Activities</h2> <div id="place-map"></div> <div class="map-legend svelte-1ychebp"><div class="legend-item svelte-1ychebp"><div class="legend-marker main svelte-1ychebp"></div> <span>Main Location</span></div> <div class="legend-item svelte-1ychebp"><div class="legend-marker activity svelte-1ychebp"></div> <span>Activities & Attractions</span></div></div></div> <div class="info-section svelte-1ychebp"><h2 class="section-title svelte-1ychebp">🎯 Things to Do</h2> <div class="activities-grid svelte-1ychebp"></div></div></div> <!>',1),va=d('<div class="place-container svelte-1ychebp"><!></div>');function ya(M,ne){Ie(ne,!1);const[ge,ye]=Ge(),ce=()=>He(Qe,"$page",ge),ve=q();let s=q(null),B=null,g=null,K=q(!0),Q=q(null);Ve(async()=>{await xe(),e(s)&&await ke()});async function xe(){try{const c=await fetch(`${Fe}/db/places/${e(ve)}.json`);if(!c.ok)throw new Error("Place not found");J(s,await c.json()),J(K,!1)}catch(c){J(Q,c.message),J(K,!1)}}async function ke(){if(!e(s))return;g=(await ze(()=>import("../chunks/r9KgTLRM.js").then(_=>_.l),[],import.meta.url)).default;const b=document.createElement("link");b.rel="stylesheet",b.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(b),setTimeout($e,100)}function $e(){if(!g||!e(s))return;B=g.map("place-map").setView(e(s).coordinates,12),g.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(B);const c=g.marker(e(s).coordinates,{icon:g.divIcon({className:"main-place-marker",html:`<div style="background: #e74c3c; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 14px;">${e(s).icon}</div>`,iconSize:[24,24],iconAnchor:[12,12]})}).addTo(B);c.bindPopup(`<strong>${e(s).name}</strong><br>${e(s).description}`),e(s).thingsToDo.forEach((_,W)=>{_.coordinates&&g.marker(_.coordinates,{icon:g.divIcon({className:"activity-marker",html:`<div style="background: #3498db; width: 28px; height: 28px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: bold;">${W+1}</div>`,iconSize:[28,28],iconAnchor:[14,14]})}).addTo(B).bindPopup(`
					<strong>${_.name}</strong><br>
					${_.description}<br>
					<em>Cost: ${_.cost} | Duration: ${_.duration}</em>
				`)});const b=new g.featureGroup;b.addLayer(c),e(s).thingsToDo.forEach(_=>{_.coordinates&&b.addLayer(g.marker(_.coordinates))}),b.getLayers().length>1&&B.fitBounds(b.getBounds().pad(.1))}Ce(()=>ce(),()=>{J(ve,ce().params.id)}),Re(),Be();var U=va();je(c=>{k(()=>Ne.title=`${e(s),r(()=>e(s)?e(s).name:"Loading...")??""} - Japan Holiday 2025`)});var Te=t(U);{var we=c=>{var b=Ue();n(c,b)},Le=c=>{var b=me(),_=le(b);{var W=P=>{var D=We(),N=t(D),X=t(N);a(N),Oe(2),a(D),k(()=>p(X,`Error: ${e(Q)??""}`)),n(P,D)},de=P=>{var D=me(),N=le(D);{var X=Y=>{var pe=ca(),Z=le(pe),he=t(Z),be=o(t(he),2),ee=t(be),ae=t(ee),Me=t(ae,!0);a(ae);var Pe=o(ae);a(ee);var _e=o(ee,2),De=t(_e,!0);a(_e),a(be),a(he),a(Z);var se=o(Z,2),fe=o(t(se),2),ue=o(t(fe),2);A(ue,5,()=>(e(s),r(()=>e(s).thingsToDo)),z,(V,i,j)=>{var S=aa(),E=t(S),I=t(E),O=t(I);O.textContent=j+1;var te=o(O);a(I);var f=o(I,2),l=t(f),u=t(l);a(l);var y=o(l,2),v=t(y);a(y),a(f),a(E);var h=o(E,2),$=t(h,!0);a(h);var G=o(h,2);{var H=m=>{var x=Ye(),C=o(t(x),2);A(C,5,()=>(e(i),r(()=>e(i).bestPhotoSpots)),z,(ie,T)=>{var L=Xe(),R=t(L),Ae=t(R);a(R),a(L),k(()=>{F(R,"href",(e(T),r(()=>e(T).link))),p(Ae,`${e(T),r(()=>e(T).name)??""} ↗`)}),n(ie,L)}),a(C),a(x),n(m,x)};w(G,m=>{e(i),r(()=>e(i).bestPhotoSpots?.length>0)&&m(H)})}var re=o(G,2);{var oe=m=>{var x=ea(),C=o(t(x),2);A(C,5,()=>(e(i),r(()=>e(i).resources)),z,(ie,T)=>{var L=Ze(),R=t(L);a(L),k(()=>{F(L,"href",(e(T),r(()=>e(T).link))),p(R,`${e(T),r(()=>e(T).name)??""} ↗`)}),n(ie,L)}),a(C),a(x),n(m,x)};w(re,m=>{e(i),r(()=>e(i).resources?.length>0)&&m(oe)})}a(S),k(()=>{p(te,` ${e(i),r(()=>e(i).name)??""}`),p(u,`💰 ${e(i),r(()=>e(i).cost)??""}`),p(v,`⏳ ${e(i),r(()=>e(i).duration)??""}`),p($,(e(i),r(()=>e(i).description)))}),n(V,S)}),a(ue),a(fe),a(se);var Se=o(se,2);{var Ee=V=>{var i=na(),j=t(i),S=o(t(j),2);A(S,5,()=>(e(s),r(()=>e(s).transportation)),z,(f,l)=>{var u=sa(),y=t(u),v=t(y,!0);a(y);var h=o(y),$=o(h);a(u),k(()=>{p(v,(e(l),r(()=>e(l).name))),p(h,`: ${e(l),r(()=>e(l).description)??""} `),F($,"href",(e(l),r(()=>e(l).link)))}),n(f,u)}),a(S),a(j);var E=o(j,2);{var I=f=>{var l=oa(),u=o(t(l),2);A(u,5,()=>(e(s),r(()=>e(s).bestTimeToVisit)),z,(y,v)=>{var h=ra(),$=t(h),G=t($);a($);var H=o($),re=o(H);{var oe=m=>{var x=ta();k(()=>F(x,"href",(e(v),r(()=>e(v).link)))),n(m,x)};w(re,m=>{e(v),r(()=>e(v).link)&&m(oe)})}a(h),k(()=>{p(G,`${e(v),r(()=>e(v).season)??""} (${e(v),r(()=>e(v).months)??""})`),p(H,`: ${e(v),r(()=>e(v).description)??""} `)}),n(y,h)}),a(u),a(l),n(f,l)};w(E,f=>{e(s),r(()=>e(s).bestTimeToVisit?.length>0)&&f(I)})}var O=o(E,2);{var te=f=>{var l=la(),u=o(t(l),2);A(u,5,()=>(e(s),r(()=>e(s).safetyTips)),z,(y,v)=>{var h=ia(),$=t(h,!0);a(h),k(()=>p($,e(v))),n(y,h)}),a(u),a(l),n(f,l)};w(O,f=>{e(s),r(()=>e(s).safetyTips?.length>0)&&f(te)})}a(i),n(V,i)};w(Se,V=>{e(s),r(()=>e(s).transportation?.length>0)&&V(Ee)})}k(()=>{p(Me,(e(s),r(()=>e(s).icon))),p(Pe,` ${e(s),r(()=>e(s).name)??""}`),p(De,(e(s),r(()=>e(s).description)))}),n(Y,pe)};w(N,Y=>{e(s)&&Y(X)},!0)}n(P,D)};w(_,P=>{e(Q)?P(W):P(de,!1)},!0)}n(c,b)};w(Te,c=>{e(K)?c(we):c(Le,!1)})}a(U),n(M,U),Je(),ye()}export{ya as component};
